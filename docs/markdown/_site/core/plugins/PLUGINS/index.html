<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/advanced-docs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/advanced-docs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(3) > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul:nth-of-type(3) > li > ul > li > ul > li > a, .site-nav > ul:nth-of-type(3) > li > ul > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul:not(:nth-of-type(3)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(3) > li > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(3) > li > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(3) > li > ul > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/advanced-docs/assets/js/vendor/lunr.min.js"></script> <script src="/advanced-docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Plugins | OMH Maps advanced docs</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Plugins" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Create a custom Map Implementation/Plugin" /> <meta property="og:description" content="Create a custom Map Implementation/Plugin" /> <link rel="canonical" href="http://localhost:4000/advanced-docs/core/plugins/PLUGINS/" /> <meta property="og:url" content="http://localhost:4000/advanced-docs/core/plugins/PLUGINS/" /> <meta property="og:site_name" content="OMH Maps advanced docs" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2024-02-23T12:29:43+01:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Plugins" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-23T12:29:43+01:00","datePublished":"2024-02-23T12:29:43+01:00","description":"Create a custom Map Implementation/Plugin","headline":"Plugins","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/advanced-docs/core/plugins/PLUGINS/"},"url":"http://localhost:4000/advanced-docs/core/plugins/PLUGINS/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/advanced-docs/" class="site-title lh-tight"> OMH Maps advanced docs </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/advanced-docs/" class="nav-list-link">Home</a></li></ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection Core" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">Core</div> <ul class="nav-list"><li class="nav-list-item"><a href="/advanced-docs/core/README/" class="nav-list-link">Core module</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced features category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/advanced-docs/core/advanced/README/" class="nav-list-link">Advanced features</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/advanced-docs/core/plugins/PLUGINS/" class="nav-list-link">Plugins</a></li><li class="nav-list-item"><a href="/advanced-docs/core/SETUP_WITH_OMH_CORE_PLUGIN/" class="nav-list-link">Setup with omh-core plugin</a></li><li class="nav-list-item"><a href="/advanced-docs/core/SETUP_WITHOUT_OMH_CORE_PLUGIN/" class="nav-list-link">Setup without omh-core plugin</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection Plugin GoogleMaps" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">Plugin GoogleMaps</div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced features category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/advanced-docs/plugin-googlemaps/advanced/README/" class="nav-list-link">Advanced features</a><ul class="nav-list"></ul></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection Plugin OSM" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">Plugin OSM</div> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced features category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/advanced-docs/plugin-openstreetmap/advanced/README/" class="nav-list-link">Advanced features</a><ul class="nav-list"></ul></li></ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search OMH Maps advanced docs" aria-label="Search OMH Maps advanced docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="create-a-custom-map-implementationplugin"> <a href="#create-a-custom-map-implementationplugin" class="anchor-heading" aria-labelledby="create-a-custom-map-implementationplugin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a custom Map Implementation/Plugin </h1> <p>The Omh Maps SDK offers developers the flexibility to create custom map implementations or plugins for any map provider. With built-in support for popular providers like Google Maps and OpenStreetMap, developers can easily integrate maps into their applications. Additionally, the Omh Maps community is actively working to expand support for more providers such as MapBox, TomTom, Bing Maps, and others. By leveraging the comprehensive interfaces and utilities provided by Omh Maps, developers can seamlessly integrate their preferred mapping services and customize their mapping experiences to suit their specific needs.</p> <ol> <li>in your app in the <code class="language-plaintext highlighter-rouge">OmhConfig</code> add the path of your library:</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OmhConfig {
        bundle("singleBuild") {
            maps {
                gmsService {
                    dependency = "com.openmobilehub.android:plugin-googlemaps:1.0"
                }
                nonGmsService {
                    dependency = "com.openmobilehub.android:plugin-openstreetmap:1.0"
                    path = "your libraries path"
                }
            }
        }
}
</code></pre></div></div> <ol> <li> <p>In your library you need to add the references like: <code class="language-plaintext highlighter-rouge">implementation("com.openmobilehub.android.maps:core:1.0")</code></p> </li> <li> <p>Basically is implement all the interfaces from the <code class="language-plaintext highlighter-rouge">OmhMapApi</code>. This means to implement the <code class="language-plaintext highlighter-rouge">OmhMapFactory</code>, <code class="language-plaintext highlighter-rouge">OmhMap</code>, <code class="language-plaintext highlighter-rouge">OmhMapView</code>, <code class="language-plaintext highlighter-rouge">OmhMarker</code>, <code class="language-plaintext highlighter-rouge">OmhPolyline</code>, <code class="language-plaintext highlighter-rouge">OmhPolygon</code> and <code class="language-plaintext highlighter-rouge">OmhLocation</code> interfaces.</p> </li> </ol> <h2 id="how-to-implement"> <a href="#how-to-implement" class="anchor-heading" aria-labelledby="how-to-implement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to implement? </h2> <h3 id="omh-map-factory"> <a href="#omh-map-factory" class="anchor-heading" aria-labelledby="omh-map-factory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Omh Map Factory </h3> <p>The interface <code class="language-plaintext highlighter-rouge">OmhMapFactory</code> a factory to provide any of the interfaces of the Omh Maps Api module. This isn’t designed to be used directly from the client side, instead use the <code class="language-plaintext highlighter-rouge">OmhMapProvider</code>.</p> <ul> <li>The method <code class="language-plaintext highlighter-rouge">getOmhMapView</code> provides the <code class="language-plaintext highlighter-rouge">OmhMapView</code> that is the main entry point with the Omh Maps module.</li> <li>The method <code class="language-plaintext highlighter-rouge">getOmhMapView</code> provides the <code class="language-plaintext highlighter-rouge">OmhLocation</code> that is the entry point for Locations.</li> </ul> <p>As example the Open Street Map module implements the OmhMapFactory as follows:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">internal</span> <span class="kd">object</span> <span class="nc">OmhMapFactoryImpl</span> <span class="p">:</span> <span class="nc">OmhMapFactory</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getOmhMapView</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">):</span> <span class="nc">OmhMapView</span> <span class="p">=</span> <span class="nc">OmhMapViewImpl</span><span class="p">.</span><span class="nc">Builder</span><span class="p">().</span><span class="nf">build</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getOmhLocation</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">):</span> <span class="nc">OmhLocation</span> <span class="p">=</span> <span class="nc">OmhLocationImpl</span><span class="p">.</span><span class="nc">Builder</span><span class="p">().</span><span class="nf">build</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <p>This means that the classes <code class="language-plaintext highlighter-rouge">OmhMapViewImpl</code> and <code class="language-plaintext highlighter-rouge">OmhLocationImpl</code> have implemented a <code class="language-plaintext highlighter-rouge">Builder</code>.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">internal</span> <span class="kd">class</span> <span class="nc">OmhMapViewImpl</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">)</span> <span class="p">:</span> <span class="nc">OmhMapView</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">internal</span> <span class="kd">class</span> <span class="nc">Builder</span> <span class="p">:</span> <span class="nc">OmhMapView</span><span class="p">.</span><span class="nc">Builder</span> <span class="p">{</span>

        <span class="k">override</span> <span class="k">fun</span> <span class="nf">build</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">):</span> <span class="nc">OmhMapView</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nc">OmhMapViewImpl</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">internal</span> <span class="kd">class</span> <span class="nc">OmhLocationImpl</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">)</span> <span class="p">:</span> <span class="nc">OmhLocation</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">internal</span> <span class="kd">class</span> <span class="nc">Builder</span> <span class="p">:</span> <span class="nc">OmhLocation</span><span class="p">.</span><span class="nc">Builder</span> <span class="p">{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">build</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">):</span> <span class="nc">OmhLocation</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nc">OmhLocationImpl</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>For more information about the Omh Map functions,see <a href="https://openmobilehub.github.io/omh-maps">Docs</a>.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
